#summary Descrição da implementação do jogo Snake

= Introdução =

O jogo Snake se trata de um dos mais tradicionais jogos presentes no mundo, onde um segmento de 3 quadrados consecutivos (normalmente são 3, em algumas implementações do jogo mais, menos ou mesmo outras representações que não sejam quadrados) se movimenta pela tela. Esse segmento é chamado de "cobra" (uma alusão ao próprio réptil) e tem como objetivo movimentar-se na tela a procura de quadrados menores os quais são intitulados como "comida". Quando a cobra chega com seu primeiro quadrado em cima da comida, o segmento da própria cobra aumenta em um quadrado. O jogo segue assim até a cobra chocar-se com um quadrado de seu próprio corpo ou com o limite da tela destinado para ela andar.

O jogador tem o controle sobre os movimentos da cobra e visualiza a comida, procurando então comê-la para que o tamanho da cobra aumente, quanto maior a cobra ficar até o final do jogo, maior a pontuação do jogador.

= Detalhes da Implementação =
Os procedimentos de desenho e movimentação, junto com algumas verificações, são feitas no segmento de código chamado "GameLoop" em que é repetido em intervalos de 60 milisegundos. As verificações feitas são de colisão com paredes (verificaColisao), colisão com a própria cobra (autoColisao), de passar pela comida (come) e de teclas lidas pelo teclado (identificaDirecao).

Os procedimentos de atualização de pontuações são feitos, em sua maioria, separado ao restante do controle do jogo. Apenas a rotina de atualização de pontuação atual é feita utilizando-se da procedure "movimentaEDesenha" para atualizar a contagem de quanto tempo passou desde que a última comida apareceu. A rotina de pontuação é separada em três segmentos, são eles:

=== Atualização da pontuação atual ===

A pontuação atual é atualizada a cada vez que o jogador come uma das comidas, sendo feita então um cálculo relacionado a quantos pontos extras ele terá de acordo com o tempo que ele demorou para comer. O cálculo é:

*ValorMax* - valor maximo da razão de bônus

*tempoUltimaComida* - tempo que o jogador demorou para comer a comida
*numeroQuadradosCobra* - número de quadrados que a cobra tem no momento que comeu

*Se (ValorMax - tempoUltimaComida) > 0*

pontuaçãoAtual += (ValorMax - tempoUltimaComida)/2*numeroQuadradosCobra 

*Senão*

pontuacaoAtual += numeroQuadradosCobra 

Essa razão beneficia quem demora pouco tempo até comer a comida gerada pelo jogo, estimulando o jogador a não ficar apenas se movimentando pela tela, mas sim a fazer o propósito do jogo, que é aumentar o número de quadrados da cobra.

=== Atualização das melhores pontuações ===

Após o término do jogo,

=== Leitura e escrita do arquivo de melhores pontuações ===

= Procedures =
== autoColisao ==
Essa procedure tem por objetivo verificar se a cobra colidiu com ela mesma setando a flag colidiu para 1, faz isso comparando o valor do primeiro ponto da cobra com os demais valores do vetor cobraPontos, com o detalhe que o ponto que esta sendo verificado é trocado temporariamente por um valor que não representa uma coordenada na tela para que o primeiro ponto não seja considerado nas comparações.

== geraComida ==
Essa procedure tem por objetivo gerar coordenadas aleatórias para a posição da comida e desenhá-la com a cor amarela definida pela procedure setTextColor. Os números aleatórios são gerados pelas procedures randomize (gera semente) e randomRange (número aleatório dentro da tela). As coordenadas geradas não podem ter o mesmo valor da coordenada de qualquer ponto da cobra, por esse fato é feita uma busca em vetor, através da instrução "repne scasb", para verificar se a comida gerada tem posição diferente da cobra, caso tenha, uma nova comida é gerada.

== verificaColisao ==
Essa é uma procedure que verifica se a cobra colidiu com as paredes da extremidade da tela. Ela define colidiu como 1 quando duas condições são atendidas: o primeiro ponto da cobra estar em uma das extremidades da tela e a cobra estar se movimentando em direção à extremidade em questão.

== identificaDirecao ==
Essa procedure lê o teclado e muda a direção da cobra de acordo com a seta pressionada. Um controle de direção é feito, pois a cobra não pode mudar para a direção contrária a que está; se pudesse, ela estaria colidindo consigo mesma, terminando o jogo.

== movimentaEdesenha ==
Essa procedure é responsável pela lógica de movimentação dos pontos da cobra e pelo desenho dela na tela. Os pontos afetados pela procedure são apenas o primeiro e o último, de forma que o último ponto é apagado e desenhado a frente do primeiro se tornando o novo primeiro ponto, com suas coordenadas atualizadas e a variável cobraIndiceUltimo é atualizada com o índice do novo último ponto da cobra.